set (PACKAGE_NAME "@PACKAGE_NAME@")
set (PACKAGE_VERSION "@PACKAGE_VERSION@")
set (PACKAGE_URL "@PACKAGE_URL@")
set (PACKAGE_BUGREPORT "@PACKAGE_BUGREPORT@")
set (PACKAGE_TARNAME "@PACKAGE_TARNAME@")
set (PACKAGE_REVISION "@PACKAGE_REVISION@")
set (PACKAGE_HASH "@PACKAGE_HASH@")
set (PATH_TESTS "@PATH_TESTS@")

if (NOT PACKAGE_REVISION)
	execute_process (
		# COMMAND date "+%S"
		COMMAND @GIT_EXECUTABLE@ --git-dir ./.git log -1 --format='%cI' | sed 's/[-T:]//g' | cut -c 1-14
		WORKING_DIRECTORY "@PROJECT_SOURCE_DIR@"
		OUTPUT_VARIABLE PACKAGE_REVISION
		OUTPUT_STRIP_TRAILING_WHITESPACE
		ERROR_QUIET
	)
endif ()

if (NOT PACKAGE_HASH)
	execute_process (
		# COMMAND date "+%S"
		COMMAND @GIT_EXECUTABLE@ --git-dir ./.git rev-parse --short HEAD
		WORKING_DIRECTORY "@PROJECT_SOURCE_DIR@"
		OUTPUT_VARIABLE PACKAGE_HASH
		OUTPUT_STRIP_TRAILING_WHITESPACE
		ERROR_QUIET
	)
endif ()

configure_file (
	"@PROJECT_SOURCE_DIR@/package_config.h.in"
	"@PROJECT_BINARY_DIR@/src/package_config.h"
	@ONLY)
